{
    "webserver": {
        "views/odin": {
            "view": "fost.view.pathprefix",
            "configuration": {
                "": "odin/static",
                "api/": "odin/api",
                "api/login/": "odin/login"
            }
        },
        "views/odin/static": {
            "view": "fost.static",
            "configuration": {
                "root": "Static/odin"
            }
        },
        "views/odin/login": {
            "view": "odin.login",
            "configuration": {
                "host": ["request", "headers", "__pgdsn", "host"],
                "user": ["request", "headers", "__pgdsn", "user"],
                "dbname": ["request", "headers", "__pgdsn", "dbname"],
                "expires": {"hours": 2},
                "failure": {
                    "view": "fost.response.401",
                    "configuration": {
                        "schemes": {
                            "Bearer": {}
                        }
                    }
                }
            }
        },
        "views/odin/api": {
            "view": "odin.secure",
            "configuration": {
                "secure": {
                    "view": "fost.view.pathprefix",
                    "configuration": {
                        "": "odin/sql"
                    }
                },
                "unsecure": {
                    "view": "fost.response.401",
                    "configuration": {
                        "schemes": {
                            "Bearer": {}
                        },
                        "view": "fostgres.sql",
                        "configuration": {
                            "host": ["request", "headers", "__pgdsn", "host"],
                            "user": ["request", "headers", "__pgdsn", "user"],
                            "dbname": ["request", "headers", "__pgdsn", "dbname"],
                            "sql": [
                                {
                                    "return": "object",
                                    "path": [],
                                    "GET": "SELECT
                                        'odin/handshake'::text AS \"@context\",
                                        array_to_json(ARRAY(SELECT * FROM odin.module)) AS odin__modules,
                                        'login/'::text AS odin__login"
                                }
                            ]
                        }
                    }
                }
            }
        },
        "views/odin/sql": {
            "view": "fostgres.sql",
            "configuration": {
                "host": ["request", "headers", "__pgdsn", "host"],
                "user": ["request", "headers", "__pgdsn", "user"],
                "dbname": ["request", "headers", "__pgdsn", "dbname"],
                "sql": [
                    {
                        "return": "object",
                        "path": [],
                        "GET": {
                            "command": "SELECT
                                    'odin/handshake'::text AS \"@context\",
                                    array_to_json(ARRAY(SELECT * FROM odin.module)) AS odin__modules,
                                    'login/'::text AS odin__login,
                                    'something/'::text AS odin__some_api,
                                    identity.tableoid AS user__tableoid,
                                    identity.*
                                FROM odin.identity WHERE identity.id = $1",
                            "arguments": [
                                ["request", "headers", "__user"]
                            ]
                        }
                    }
                ]
            }
        }
    }
}

